<%- include("header.ejs") %>

<div class="container mt-5 pt-4">
  <div class="dash-title text-center mb-4">
    <h1 class="py-3 px-2 text-white" style="background-color:#35b9dd; border-radius: 8px;">
      Edit Application
    </h1>
    <p class="text-muted">You can edit your application while it is in pending status.</p>
  </div>

  <div class="card shadow-sm mb-5">
    <div class="card-body">
      <form action="/editcourse/<%= app._id %>" method="post">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-control" value="<%= app.name %>" required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" value="<%= app.email %>" required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Mobile No.</label>
            <input type="text" name="number" class="form-control" value="<%= app.number %>" required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">D.O.B</label>
            <input type="date" name="dob" class="form-control"
              value="<%= app.dob ? app.dob.toISOString().slice(0,10) : '' %>" required>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Gender</label>
            <select name="gender" class="form-control" required>
              <option value="male" <%= app.gender === 'male' ? 'selected' : '' %>>Male</option>
              <option value="female" <%= app.gender === 'female' ? 'selected' : '' %>>Female</option>
              <option value="other" <%= app.gender === 'other' ? 'selected' : '' %>>Other</option>
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Address</label>
            <input type="text" name="address" class="form-control" value="<%= app.address %>" required>
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label">College</label>
            <input type="text" name="college" class="form-control"
              value="<%= app.course && app.course.college ? app.course.college : app.college %>" required>
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label">Course</label>
            <input type="text" name="course" class="form-control"
              value="<%= app.course && app.course.name ? app.course.name : '' %>" disabled>
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label">Branch</label>
            <input type="text" name="branch" class="form-control" value="<%= app.branch %>" required>
          </div>
        </div>

        <div class="mt-3">
          <button type="submit" class="btn btn-primary">Update</button>
          <a href="/display" class="btn btn-secondary ms-2">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>

<%- include("footer.ejs") %>
