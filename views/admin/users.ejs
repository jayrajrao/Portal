<%- include('../header.ejs') %>

<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Users</h3>
    <a class="btn btn-outline-secondary" href="/admin/dashboard">Dashboard</a>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead><tr><th>#</th><th>Name</th><th>Email</th><th>Role</th><th>Joined</th><th>Actions</th></tr></thead>
      <tbody>
        <% users.forEach((u, i) => { %>
          <tr>
            <td><%= i+1 %></td>
            <td><%= u.name %></td>
            <td><%= u.email %></td>
            <td><%= u.role %></td>
            <td><%= new Date(u.createdAt).toLocaleDateString() %></td>
            <td>
              <form action="/admin/users/<%= u._id %>/delete" method="post" onsubmit="return confirm('Delete user? This will also remove access.')">
                <button class="btn btn-sm btn-danger" type="submit">Delete</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include('../footer.ejs') %>
