<%- include('../header.ejs') %>
<br>
<br>
<br>
<br>
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3>Admin Dashboard</h3>
    <div>
      <a class="btn btn-outline-secondary" href="/admin/applications">All Applications</a>
      <a class="btn btn-danger ms-2" href="/admin/logout">Logout</a>
    </div>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-md-3"><div class="card p-3"><h6>Total Applications</h6><h3><%= stats.totalApps %></h3></div></div>
    <div class="col-md-3"><div class="card p-3"><h6>Pending</h6><h3><%= stats.pending %></h3></div></div>
    <div class="col-md-3"><div class="card p-3"><h6>Approved</h6><h3><%= stats.approved %></h3></div></div>
    <div class="col-md-3"><div class="card p-3"><h6>Rejected</h6><h3><%= stats.rejected %></h3></div></div>
  </div>

  <h5>Recent Applications</h5>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead><tr><th>#</th><th>Name</th><th>User</th><th>Course</th><th>Status</th><th>Applied At</th></tr></thead>
      <tbody>
        <% recent.forEach(function(r,i){ %>
          <tr>
            <td><%= i+1 %></td>
            <td><%= r.name %></td>
            <td><%= r.user ? r.user.name : '-' %></td>
            <td><%= r.course ? r.course.name : '-' %></td>
            <td><%= r.status %></td>
            <td><%= new Date(r.createdAt).toLocaleString() %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include('../footer.ejs') %>
